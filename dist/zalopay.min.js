!function(e,o){"undefined"!=typeof module&&module.exports?module.exports=o():"function"==typeof define&&(define.amd||define.cmd)?define(o):(e.ZaloPay=e.ZaloPay||{},o.call(e,e.ZaloPay))}(this,function(e){"use strict";function o(e){return"function"===r(e)}function n(e){return"string"===r(e)}function a(e){return"object"===r(e)}function i(e){return"number"===r(e)}function r(e){return Object.prototype.toString.call(e).replace(/\[object (\w+)\]/,"$1").toLowerCase()}function t(){var o=+new Date,n=[].slice.call(arguments),a=n[0].toLowerCase().trim();switch(a){case"error":n.splice(0,1),1===n.length?console.error(o,n[0]):console.error(o,n);break;case"warn":n.splice(0,1),1===n.length?console.warn(o,n[0]):console.warn(o,n);break;case"info":n.splice(0,1),1===n.length?console.log(o,n[0]):console.log(o,n);break;default:a="info",1===n.length?console.log(o,n[0]):console.log(o,n)}if(e.isDebug&&e.call&&window.ZaloPayJSBridge&&window.ZaloPayJSBridge.call){var i={type:a,time:o,data:JSON.stringify(n)};e.call("writeLog",i)}}return(e=e||{}).ua=navigator.userAgent,e.jsVersion="1.0.0",e.isDebug=!0,e.isZaloPay=e.ua.indexOf("ZaloPayClient")>-1,e.isZaloPay||t("warn","Run in ZaloPayClient please!"),e.appVersion=function(){if(e.isZaloPay){var o=e.ua.match(/ZaloPayClient\/(.*)/);return o&&o.length?o[1]:""}}(),e.appInfo={name:"ZaloPay",isZaloPay:e.isZaloPay,jsVersion:e.jsVersion,appVersion:e.appVersion},e.on=function(e,o){e.split(/\s+/g).forEach(function(e){document.addEventListener(e,o,!1)})},e.call=function(){var r=[].slice.call(arguments);if(window.ZaloPayJSBridge&&window.ZaloPayJSBridge.call){var l=r[0],c=r[1]||{},s=r[2];if(!n(l))return void t("error","ZaloPay.call","Request undefined function!");if(void 0===s&&o(c)&&(s=c,c={}),!a(c))return void t("error","ZaloPay.call","Request undefined options!");var d=s;s=function(e){e=function(e,o){(e=e||{}).errorCode=e.error||0,1!==e.error?t("error",o+": errorCode["+e.errorCode+"], message["+e.errorMessage+"]"):t("info",o+": errorCode["+e.errorCode+"], message["+e.errorMessage+"]");return e}(e,l),d&&d(e)},"writeLog"!==l&&t("info","ZaloPayJSBridge.call",l,c,d),window.ZaloPayJSBridge.call(l,c,s)}else{var p=r[1].deeplinks,u=r[1].internalApp;if(p&&n(p))window.location.href=p;else if(i(u))return void(window.location.href="https://zalopay.com.vn/openapp/openapp.html?type=app&appid="+u);e._apiQueue=e._apiQueue||[],e._apiQueue.push(r)}},e._ready=function(o){window.ZaloPayJSBridge&&window.ZaloPayJSBridge.call?o&&o():e.on("ZaloPayJSBridgeReady",o)},e.ready=e.ready||e._ready,e.showLoading=function(){e.call("showLoading")},e.hideLoading=function(){e.call("hideLoading")},e.closeWindow=function(){e.call("closeWindow")},e.showDialog=function(o){a(o)?n(o.title)&&n(o.message)&&n(o.button)&&(o={type:2,title:o.title,message:o.message,button:o.button},e.call("showDialog",o)):t("error","ZaloPay.showDialog","Received invalid object")},e.showToast=function(o){a(o)?n(o.message)&&(o={message:o.message},e.call("showToast",o)):t("error","ZaloPay.showToast","Received invalid object")},e.showTooltip=function(o){if(a(o)){var r=i(o.position)&&o.position>1?o.position:0;n(o.message)&&(n(o.iconName)||n(o.iconLink))&&(o={message:o.message,iconName:o.iconName,iconLink:o.iconLink,position:r},e.call("showTooltip",o))}else t("error","ZaloPay.showTooltip","Received invalid object")},e.pushView=function(o){if(a(o))return n(o.url)?(o={url:o.url},void e.call("pushView",o)):void t("error","ZaloPay.pushView","Received missing require param!");t("error","ZaloPay.pushView","Received invalid object")},e.share=function(o){a(o)?i(o.type)&&n(o.caption)&&n(o.content)&&(o={type:o.type,caption:o.caption,content:o.content},e.call("share",o)):t("error","ZaloPay.share","Received invalid object")},e.payOrder=function(o,i){if(a(o))return n(o.zptranstoken)?(t("info","ZaloPay.payOrder","Received zptranstoken",o={zptranstoken:o.zptranstoken,appid:o.appid}),void e.call("payOrder",o,i)):n(o.mac)?(t("info","ZaloPay.payOrder","Received transinfo",o={appid:o.appid,appuser:o.appuser,apptime:o.apptime,amount:o.amount,apptransid:o.apptransid,embeddata:o.embeddata,item:o.item,description:o.description,mac:o.mac}),void e.call("payOrder",o,i)):void t("error","ZaloPay.payOrder","Received missing require param!");t("error","ZaloPay.payOrder","Received invalid object")},e.transferMoney=function(o,r){if(a(o))return n(o.zpid)&&n(o.message)&&i(o.amount)?(t("info","ZaloPay.transferMoney","Received transferMoney",o={zpid:o.zpid,amount:o.amount,message:o.message}),void e.call("transferMoney",o,r)):void t("error","ZaloPay.transferMoney","Received missing require param!");t("error","ZaloPay.transferMoney","Received invalid object")},e.promotionEvent=function(o){if(a(o))return i(o.campaignId)&&i(o.internalApp)?(t("info","ZaloPay.promotionEvent","Received promotionEvent",o={campaignId:o.campaignId,internalApp:o.internalApp,alternateUrl:o.alternateUrl,deeplinks:o.deeplinks}),void e.call("promotionEvent",o)):i(o.campaignId)&&n(o.url)&&n(o.packageId)?(t("info","ZaloPay.promotionEvent","Received promotionEvent",o={campaignId:o.campaignId,url:o.url,packageId:o.packageId,alternateUrl:o.alternateUrl,deeplinks:o.deeplinks}),void e.call("promotionEvent",o)):void t("error","ZaloPay.transferMoney","Received missing require param!",o);t("error","ZaloPay.promotionEvent","Received invalid object")},e.setProperty=function(n,i){a(n)?(t("info","ZaloPay.setProperty","Received navigator",n),o(i)?e.call("setProperty",n,i):e.call("setProperty",n)):t("error","ZaloPay.setProperty","Received invalid object")},e.setToolbarActions=function(a,i){if("array"!==r(a)||a.length<1||!o(i))t("error","ZaloPay.setToolbarActions","Received invalid object");else{var l=[];if(a.forEach(function(e,o){n(e.iconId)&&(n(e.iconLink)?l.push({iconId:e.iconId,func:i.name,iconLink:e.iconLink,iconName:"",iconColor:""}):n(e.iconName)&&(n(e.iconColor)?l.push({iconId:e.iconId,func:i.name,iconLink:"",iconName:e.iconName,iconColor:e.iconColor}):l.push({iconId:e.iconId,func:i.name,iconLink:"",iconName:e.iconName,iconColor:""})))}),l.length>0)return e.call("setToolbarActions",{data:l}),void document.addEventListener(i.name,i,!1);t("error","ZaloPay.setToolbarActions","Received missing require param!",a)}},e.getUserInfo=function(n,a){o(a)&&i(n)?(t("info","ZaloPay.getUserInfo","Received UserInfo in function callback"),e.call("getUserInfo",{appid:n},a)):t("error","ZaloPay.getUserInfo","Received invalid function callback")},e.requestAnimationFrame=function(e){var o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;if(o)return o(e);t("error","ZaloPay.requestAnimationFrame","Not supported!")},e._ready(function(){t("info","ZaloPayJS Ready!");var o=e._apiQueue||[];o.length&&function n(){e.requestAnimationFrame(function(){var a=o.shift();e.call.apply(null,a),o.length&&n()})}()}),["appinfo","showLoading","hideLoading","closeWindow","showDialog","pushView"].forEach(function(o){e[o]=function(){var n=[].slice.call(arguments);e.call.apply(null,[o].concat(n))}}),e});